CREATE DATABASE foro_alura;

USE foro_alura;

CREATE TABLE TOPICOS (
id BIGINT NOT NULL AUTO_INCREMENT,
titulo VARCHAR(250) NOT NULL,
mensaje VARCHAR(500) NOT NULL,
fecha_creacion DATE NOT NULL,
estatus_topico VARCHAR(50) NOT NULL,
autor VARCHAR(100) NOT NULL,
curso VARCHAR(255) NOT NULL,
PRIMARY KEY (id)
)Engine=InnoDB;

CREATE TABLE USUARIOS (
id BIGINT NOT NULL AUTO_INCREMENT,
nombre VARCHAR(100) NOT NULL,
email VARCHAR(100) NOT NULL,
contrasena VARCHAR(300) NOT NULL
PRIMARY KEY (id)
)Engine=InnoDB;

CREATE TABLE CURSOS (
id BIGINT NOT NULL AUTO_INCREMENT,
nombre VARCHAR(150) NOT NULL,
categoria VARCHAR(150) NOT NULL,
PRIMARY KEY (id)
)Engine=InnoDB;



Hibernate: create table topico (id bigint generated by default as identity, fecha_creacion timestamp(6), mensaje varchar(255), titulo varchar(255), primary key (id))
Hibernate: create table usuario (id bigint generated by default as identity, contrasena varchar(255), email varchar(255), nombre varchar(255), primary key (id))
Hibernate: create table curso (id bigint generated by default as identity, categoria varchar(255), nombre varchar(255), primary key (id))

CREATE TABLE TOPICOS (
id BIGINT NOT NULL AUTO_INCREMENT,
titulo VARCHAR(250) NOT NULL,
mensaje VARCHAR(500) NOT NULL,
fecha_creacion DATE NOT NULL,
estatus_topico VARCHAR(50),
autor VARCHAR(100),
curso VARCHAR(255),
PRIMARY KEY (id)
);


CREATE DATABASE foro_alura;

USE foro_alura;

DROP TABLE TOPICOS;
DROP TABLE CURSOS;
DROP TABLE USUARIOS;
DROP TABLE flyway_schema_history;

CREATE TABLE TOPICOS (
id INT AUTO_INCREMENT,
titulo VARCHAR(150),
mensaje VARCHAR(4000),
fecha_creacion DATE,
estatus_topico VARCHAR(50),
autor VARCHAR(150),
curso VARCHAR(150),
PRIMARY KEY (id)
)Engine=InnoDB;

CREATE TABLE USUARIOS (
id BIGINT NOT NULL AUTO_INCREMENT,
nombre VARCHAR(100) NOT NULL,
email VARCHAR(100) NOT NULL,
contrasena VARCHAR(300) NOT NULL,
PRIMARY KEY (id)
);

CREATE TABLE CURSOS (
id BIGINT NOT NULL AUTO_INCREMENT,
nombre VARCHAR(150) NOT NULL,
categoria VARCHAR(150) NOT NULL,
PRIMARY KEY (id)
);

CREATE TABLE TOPICOS (
id BIGINT NOT NULL AUTO_INCREMENT,
titulo VARCHAR(250) NOT NULL,
mensaje VARCHAR(500) NOT NULL,
fecha_creacion DATE NOT NULL,
status VARCHAR(50),
id_usuario BIGINT,
id_curso BIGINT,
PRIMARY KEY (id),
FOREIGN KEY (id_usuario) REFERENCES usuarios(id),
FOREIGN KEY (id_curso) REFERENCES cursos(id)
);




USE FORO_ALURA;
SELECT * FROM TOPICOS;
SELECT * FROM USUARIOS;
SELECT * FROM CURSOS;

INSERT INTO CURSOS (NOMBRE, CATEGORIA) VALUES ('SQL','BASE DE DATOS');
INSERT INTO CURSOS (NOMBRE, CATEGORIA) VALUES ('JAVA','PROGRAMACION');
INSERT INTO CURSOS (NOMBRE, CATEGORIA) VALUES ('PYTHON','PROGRAMACION');
INSERT INTO CURSOS (NOMBRE, CATEGORIA) VALUES ('SPRING BOOT','FRAMEWORK');
INSERT INTO CURSOS (NOMBRE, CATEGORIA) VALUES ('HTML','WEB');

INSERT INTO USUARIOS (NOMBRE, EMAIL, CONTRASENA) VALUES ('MANUEL.ESTEVEZ', 'manue.estevez@aluara.com', '1234');
INSERT INTO USUARIOS (NOMBRE, EMAIL, CONTRASENA) VALUES ('ILKAY.GUNDOGAN', 'ilkay.gundogan@aluara.com', '1234');
INSERT INTO USUARIOS (NOMBRE, EMAIL, CONTRASENA) VALUES ('KEVIN.DEBRUYNE', 'kevin.debruyne@aluara.com', '1234');
INSERT INTO USUARIOS (NOMBRE, EMAIL, CONTRASENA) VALUES ('MANUEL.AKANYI', 'manuel.akanyi@aluara.com', '1234');
INSERT INTO USUARIOS (NOMBRE, EMAIL, CONTRASENA) VALUES ('EDERNSON.MORAES', 'edernon.moraes@aluara.com', '1234');

INSERT INTO TOPICOS (TITULO, MENSAJE, FECHA_CREACION, STATUS, ID_USUARIO, ID_CURSO) VALUES ('PROBLEMAS CON SQL', 'NO PUEDO CREAR UNA LLAVE FORANEA', '2023-06-01', 'NO_RESPONDIDO', 1, 1);
INSERT INTO TOPICOS (TITULO, MENSAJE, FECHA_CREACION, STATUS, ID_USUARIO, ID_CURSO) VALUES ('PROBLEMAS CON JAVA', 'NO PUEDO CREAR UNA RECURSION', '2023-06-02', 'NO_RESPONDIDO', 2, 2);
INSERT INTO TOPICOS (TITULO, MENSAJE, FECHA_CREACION, STATUS, ID_USUARIO, ID_CURSO) VALUES ('PROBLEMAS CON PYTHON', 'NO PUEDO CREAR UN LISTA', '2023-06-03', 'NO_RESPONDIDO', 2, 2);
INSERT INTO TOPICOS (TITULO, MENSAJE, FECHA_CREACION, STATUS, ID_USUARIO, ID_CURSO) VALUES ('PROBLEMAS CON SPRING BOOT', 'NO PUEDO CREAR HACER ANOTACIONES', '2023-06-04', 'NO_RESPONDIDO', 2, 2);
INSERT INTO TOPICOS (TITULO, MENSAJE, FECHA_CREACION, STATUS, ID_USUARIO, ID_CURSO) VALUES ('PROBLEMAS CON HTML', 'NO PUEDO CREAR UN DIV', '2023-06-07', 'NO_RESPONDIDO', 2, 2);

TRUNCATE TABLE TOPICOS;

COMMIT;

select t1_0.id,t1_0.id_usuario,t1_0.id_curso,t1_0.fecha_creacion,t1_0.mensaje,t1_0.status,t1_0.titulo from topicos t1_0;
select u1_0.id,u1_0.contrasena,u1_0.email,u1_0.nombre from usuarios u1_0 where u1_0.id=1;
select c1_0.id,c1_0.categoria,c1_0.nombre from cursos c1_0 where c1_0.id=1;

select t1_0.id_curso,t1_0.id,a1_0.id,a1_0.contrasena,a1_0.email,a1_0.nombre,t1_0.fecha_creacion,t1_0.mensaje,t1_0.status,t1_0.titulo from topicos t1_0 left join usuarios a1_0 on a1_0.id=t1_0.id_usuario where t1_0.id_curso=1;